{"ast":null,"code":"import'../App.css';import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const TicketsPage=()=>{const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[tickets,setTickets]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);useEffect(()=>{const fetchTickets=async()=>{try{const response=await fetch('http://localhost:3000/Tickets/getAllTickets',{headers:{'Accept':'application/json'},credentials:'include'});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}const data=await response.json();setTickets(data);setLoading(false);}catch(error){console.error('Error fetching tickets:',error);setError(error.message);setLoading(false);}};fetchTickets();},[]);const handleSearch=()=>{const filteredTickets=tickets.filter(ticket=>{const{user,Category,Sub_Category,Status,TDescribtion}=ticket;const searchTermLower=searchTerm.toLowerCase();return user.toLowerCase().includes(searchTermLower)||Category.toLowerCase().includes(searchTermLower)||Sub_Category.toLowerCase().includes(searchTermLower)||Status.toLowerCase().includes(searchTermLower)||TDescribtion.toLowerCase().includes(searchTermLower);});setSearchResults(filteredTickets);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Tickets\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Search:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Search\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),!loading&&!error&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{children:searchResults.length>0?searchResults.map(ticket=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"User ID: \",ticket.user]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",ticket.Category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sub Category: \",ticket.Sub_Category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",ticket.Status]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",ticket.TDescribtion]})]},ticket._id)):tickets.map(ticket=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"User ID: \",ticket.user]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",ticket.Category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sub Category: \",ticket.Sub_Category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",ticket.Status]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",ticket.TDescribtion]})]},ticket._id))})})]});};export default TicketsPage;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TicketsPage","loading","setLoading","error","setError","tickets","setTickets","searchTerm","setSearchTerm","searchResults","setSearchResults","fetchTickets","response","fetch","headers","credentials","ok","Error","concat","status","data","json","console","message","handleSearch","filteredTickets","filter","ticket","user","Category","Sub_Category","Status","TDescribtion","searchTermLower","toLowerCase","includes","children","type","value","onChange","e","target","onClick","length","map","_id"],"sources":["/Users/mazen/Help_Desk/frontend/my-react-app/src/components/TicketList.js"],"sourcesContent":["import '../App.css';\nimport React, { useEffect, useState } from 'react';\n\nconst TicketsPage = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [tickets, setTickets] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n\n  useEffect(() => {\n    const fetchTickets = async () => {\n      try {\n        const response = await fetch('http://localhost:3000/Tickets/getAllTickets', {\n          headers: {\n            'Accept': 'application/json',\n          },\n          credentials: 'include',\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        setTickets(data);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching tickets:', error);\n        setError(error.message);\n        setLoading(false);\n      }\n    };\n\n    fetchTickets();\n  }, []);\n\n  const handleSearch = () => {\n    const filteredTickets = tickets.filter((ticket) => {\n      const { user, Category, Sub_Category, Status, TDescribtion } = ticket;\n      const searchTermLower = searchTerm.toLowerCase();\n      return (\n        user.toLowerCase().includes(searchTermLower) ||\n        Category.toLowerCase().includes(searchTermLower) ||\n        Sub_Category.toLowerCase().includes(searchTermLower) ||\n        Status.toLowerCase().includes(searchTermLower) ||\n        TDescribtion.toLowerCase().includes(searchTermLower)\n      );\n    });\n\n    setSearchResults(filteredTickets);\n  };\n\n  return (\n    <div>\n      <h1>All Tickets</h1>\n      <div>\n        <label>\n          Search:\n          <input type=\"text\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />\n        </label>\n        <button onClick={handleSearch}>Search</button>\n      </div>\n      {loading && <p>Loading...</p>}\n      {error && <p>Error: {error}</p>}\n      {!loading && !error && (\n        <>\n          <ul>\n            {searchResults.length > 0 ? (\n              searchResults.map((ticket) => (\n                <li key={ticket._id}>\n                  <p>User ID: {ticket.user}</p>\n                  <p>Category: {ticket.Category}</p>\n                  <p>Sub Category: {ticket.Sub_Category}</p>\n                  <p>Status: {ticket.Status}</p>\n                  <p>Description: {ticket.TDescribtion}</p>\n                </li>\n              ))\n            ) : (\n              tickets.map((ticket) => (\n                <li key={ticket._id}>\n                  <p>User ID: {ticket.user}</p>\n                  <p>Category: {ticket.Category}</p>\n                  <p>Sub Category: {ticket.Sub_Category}</p>\n                  <p>Status: {ticket.Status}</p>\n                  <p>Description: {ticket.TDescribtion}</p>\n                </li>\n              ))\n            )}\n          </ul>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default TicketsPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}