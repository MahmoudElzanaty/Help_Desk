{"ast":null,"code":"// TicketsPage.js\nimport'../App.css';import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const TicketsPage=()=>{const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[tickets,setTickets]=useState([]);useEffect(()=>{const fetchTickets=async()=>{try{// Fetch authentication token from your storage (e.g., localStorage, cookies)\nconst authToken=localStorage.getItem('authToken');// Replace with your actual storage method\nconst response=await fetch('http://localhost:3000/Tickets/getAllTickets',{headers:{'Accept':'application/json','Authorization':\"Bearer \".concat(authToken)// Include the token in the Authorization header\n},credentials:'include'});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}const data=await response.json();setTickets(data);setLoading(false);}catch(error){console.error('Error fetching tickets:',error);setError(error.message);setLoading(false);}};fetchTickets();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Tickets\"}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),!loading&&!error&&/*#__PURE__*/_jsx(\"ul\",{children:tickets.map(ticket=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"User ID: \",ticket.user]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",ticket.Category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sub Category: \",ticket.Sub_Category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",ticket.Status]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",ticket.TDescribtion]})]},ticket._id))})]});};export default TicketsPage;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","TicketsPage","loading","setLoading","error","setError","tickets","setTickets","fetchTickets","authToken","localStorage","getItem","response","fetch","headers","concat","credentials","ok","Error","status","data","json","console","message","children","map","ticket","user","Category","Sub_Category","Status","TDescribtion","_id"],"sources":["/Users/mazen/Help_Desk/frontend/my-react-app/src/components/TicketList.js"],"sourcesContent":["// TicketsPage.js\nimport '../App.css';\nimport React, { useEffect, useState } from 'react';\n\nconst TicketsPage = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [tickets, setTickets] = useState([]);\n\n  useEffect(() => {\n    const fetchTickets = async () => {\n      try {\n        // Fetch authentication token from your storage (e.g., localStorage, cookies)\n        const authToken = localStorage.getItem('authToken'); // Replace with your actual storage method\n\n        const response = await fetch('http://localhost:3000/Tickets/getAllTickets', {\n          headers: {\n            'Accept': 'application/json',\n            'Authorization': `Bearer ${authToken}`, // Include the token in the Authorization header\n          },\n          credentials: 'include',\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        setTickets(data);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching tickets:', error);\n        setError(error.message);\n        setLoading(false);\n      }\n    };\n\n    fetchTickets();\n  }, []);\n\n  return (\n    <div>\n      <h1>All Tickets</h1>\n      {loading && <p>Loading...</p>}\n      {error && <p>Error: {error}</p>}\n      {!loading && !error && (\n        <ul>\n          {tickets.map((ticket) => (\n            <li key={ticket._id}>\n              <p>User ID: {ticket.user}</p>\n              <p>Category: {ticket.Category}</p>\n              <p>Sub Category: {ticket.Sub_Category}</p>\n              <p>Status: {ticket.Status}</p>\n              <p>Description: {ticket.TDescribtion}</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default TicketsPage;\n"],"mappings":"AAAA;AACA,MAAO,YAAY,CACnB,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnD,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGP,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAE1CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF;AACA,KAAM,CAAAC,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAE;AAErD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,6CAA6C,CAAE,CAC1EC,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,eAAe,WAAAC,MAAA,CAAYN,SAAS,CAAI;AAC1C,CAAC,CACDO,WAAW,CAAE,SACf,CAAC,CAAC,CAEF,GAAI,CAACJ,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,wBAAAH,MAAA,CAAwBH,QAAQ,CAACO,MAAM,CAAE,CAAC,CAC3D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCd,UAAU,CAACa,IAAI,CAAC,CAChBjB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdkB,OAAO,CAAClB,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CC,QAAQ,CAACD,KAAK,CAACmB,OAAO,CAAC,CACvBpB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDK,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACER,KAAA,QAAAwB,QAAA,eACE1B,IAAA,OAAA0B,QAAA,CAAI,aAAW,CAAI,CAAC,CACnBtB,OAAO,eAAIJ,IAAA,MAAA0B,QAAA,CAAG,YAAU,CAAG,CAAC,CAC5BpB,KAAK,eAAIJ,KAAA,MAAAwB,QAAA,EAAG,SAAO,CAACpB,KAAK,EAAI,CAAC,CAC9B,CAACF,OAAO,EAAI,CAACE,KAAK,eACjBN,IAAA,OAAA0B,QAAA,CACGlB,OAAO,CAACmB,GAAG,CAAEC,MAAM,eAClB1B,KAAA,OAAAwB,QAAA,eACExB,KAAA,MAAAwB,QAAA,EAAG,WAAS,CAACE,MAAM,CAACC,IAAI,EAAI,CAAC,cAC7B3B,KAAA,MAAAwB,QAAA,EAAG,YAAU,CAACE,MAAM,CAACE,QAAQ,EAAI,CAAC,cAClC5B,KAAA,MAAAwB,QAAA,EAAG,gBAAc,CAACE,MAAM,CAACG,YAAY,EAAI,CAAC,cAC1C7B,KAAA,MAAAwB,QAAA,EAAG,UAAQ,CAACE,MAAM,CAACI,MAAM,EAAI,CAAC,cAC9B9B,KAAA,MAAAwB,QAAA,EAAG,eAAa,CAACE,MAAM,CAACK,YAAY,EAAI,CAAC,GALlCL,MAAM,CAACM,GAMZ,CACL,CAAC,CACA,CACL,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/B,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}